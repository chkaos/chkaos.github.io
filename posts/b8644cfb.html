<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Theia 扫盲篇 - chkaos - Find the calm in chaos</title><meta description="目标 ：对 Eclipse Theia 框架技术有一个初步认识"><meta property="og:type" content="blog"><meta property="og:title" content="Theia 扫盲篇"><meta property="og:url" content="https://chkaos.top/posts/b8644cfb.html"><meta property="og:site_name" content="chkaos - Find the calm in chaos"><meta property="og:description" content="目标 ：对 Eclipse Theia 框架技术有一个初步认识"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/20200820002119.png"><meta property="article:published_time" content="2020-08-19T16:25:46.000Z"><meta property="article:modified_time" content="2020-08-19T16:25:46.000Z"><meta property="article:author" content="Chkaos"><meta property="article:tag" content="WebIde"><meta property="article:tag" content=" Theia"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/20200820002119.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://chkaos.top/posts/b8644cfb.html"},"headline":"chkaos - Find the calm in chaos","image":["https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/20200820002119.png"],"datePublished":"2020-08-19T16:25:46.000Z","dateModified":"2020-08-19T16:25:46.000Z","author":{"@type":"Person","name":"Chkaos"},"description":"目标 ：对 Eclipse Theia 框架技术有一个初步认识"}</script><link rel="canonical" href="https://chkaos.top/posts/b8644cfb.html"><link id="favicon" rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?515142e072dc41d1d43a08637d816183";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><link rel="alternate" href="/atom.xml" title="chkaos - Find the calm in chaos" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main" id="navbar"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-logo" href="/"><img class="no-lazy" src="/img/logo.png" alt="Find the calm in chaos" height="32"></a><div class="navbar-item navbar-text">Chkaos</div><div class="navbar-item">Find the calm in chaos</div></div><div class="navbar-menu"><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="btn-toggle-dark" title="夜间模式" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-3 is-size-4-mobile">Theia 扫盲篇</h1><div class="article-type translation"><span>翻译</span></div><div class="content"><h2 id="Theia-扫盲篇"><a href="#Theia-扫盲篇" class="headerlink" title="Theia 扫盲篇"></a>Theia 扫盲篇</h2><h3 id="What-is-Eclipse-Theia"><a href="#What-is-Eclipse-Theia" class="headerlink" title="What is Eclipse Theia?"></a>What is Eclipse Theia?</h3><p><a href="https://github.com/eclipse-theia/theia">Eclipse Theia</a> 是一个基于现代 Web 技术(TypeScript, CSS 和 HTML)实现，用于构建桌面/云 <code>IDE</code> 或者定制工具的开源平台。</p>
<p>Clode IDE 是解决本地开发环境存在的一些问题的一种方案。例如开发机性能要求高、开发环境配置复杂、依赖特定设备、复杂工程管理难等问题。</p>
<p>目前市面上已经有一些基于 Theia 构建的 Clode IDE 产品: 如 <a href="https://gitpod.io/#https://github.com/theia-ide/theia">Gitpod</a> …</p>
<p><img src="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/image6.png" class="lazyload" data-srcset="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/image6.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABlBMVEXMzMyWlpYU2uzLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNgAAAAAgAB9HFkpgAAAABJRU5ErkJggg==" alt=""></p>
<p>打开 Gitpod 后就可以看到它的界面和常用的 VS Code 是很相似的。二者之间的比较在<a href="#Theia和VSCode">下方</a>。</p>
<p><img src="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/23423432sdf.png" class="lazyload" data-srcset="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/23423432sdf.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABlBMVEXMzMyWlpYU2uzLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNgAAAAAgAB9HFkpgAAAABJRU5ErkJggg==" alt="Gitpod"></p>
<p>Theia 作为一个开发 IDE 和工具的平台，有三个目标：</p>
<ul>
<li>提供公共特性，可以重用这些公共特性尽可能高效地实现自定义工具，这些可重用特性大大降低了实现自定义工具或 IDE 所需的工作;<ul>
<li>提供基本的工作台框架，包括菜单、状态栏、视图概念、部件布局、工作空间抽象等，工作台可以通过自定义 UI 扩展进行扩展，比如菜单项、自定义视图和自定义编辑器；</li>
<li>复用常用工具特性，如集成支持 LSP 的源代码编辑器、支持 Git、终端等工具</li>
</ul>
</li>
<li>提供将现有和新模块集成到定制产品的机制，允许您通过组合现有模块和自定义扩展来创建自定义产品；在 Theia 里, 可以说是万物皆拓展，包括其核心模块也是以拓展包的形式存在;</li>
<li>一套代码可以同时使用桌面应用程序和 Web 应用程序(独特卖点);</li>
</ul>
<h3 id="Theia和VSCode"><a href="#Theia和VSCode" class="headerlink" title="Theia和VSCode"></a>Theia和VSCode</h3><p>对于前端开发者来说, VS Code可谓再熟悉不过了。</p>
<p><img src="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/34e234234.jpg" class="lazyload" data-srcset="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/34e234234.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABlBMVEXMzMyWlpYU2uzLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNgAAAAAgAB9HFkpgAAAABJRU5ErkJggg==" alt=""></p>
<p>VS Code是一种现成的产品，用户可以自行下载和扩展，目前已经是最流行的开发者工具之一。Eclipse Theia 则是一个允许创建完全自定义和带有白标产品的一个框架，是用于构建ide的平台而不是ide本身。</p>
<table>
<thead>
<tr>
<th>对比指标</th>
<th>VS Code Product</th>
<th>VS Code Project</th>
<th>Eclipse Theia</th>
</tr>
</thead>
<tbody><tr>
<td>可用性概念</td>
<td>✔✔</td>
<td>✔✔</td>
<td>✔✔</td>
</tr>
<tr>
<td>技术栈和架构</td>
<td>✔✔</td>
<td>✔✔</td>
<td>✔✔</td>
</tr>
<tr>
<td>可扩展性和适应性</td>
<td>？</td>
<td>✔</td>
<td>✔✔</td>
</tr>
<tr>
<td>可用的扩展和技术</td>
<td>✔✔</td>
<td>✔</td>
<td>?</td>
</tr>
<tr>
<td>在线/离线功能，桌面端/云端</td>
<td>✔(Visual Studio Online)</td>
<td>✖</td>
<td>✔✔</td>
</tr>
<tr>
<td>开源</td>
<td>✖</td>
<td>✔✔</td>
<td>✔✔</td>
</tr>
<tr>
<td>生态系统和供应商中立性</td>
<td>?</td>
<td>✔</td>
<td>✔✔</td>
</tr>
</tbody></table>
<p><a href="https://che-incubator.github.io/vscode-theia-comparator/status.html">详细对比可以直接点这。</a></p>
<ul>
<li><p>可用性概念：VS Code 主要关注代码，在用户界面中占用的功能非常少，它的可用性概念是围绕使用键盘，而不是鼠标。许多特性只能通过CLI或命令面板获得。Theia 和 VS Code 使用相同的代码编辑器(Monaco)、窗口管理和非常相似的命令面板，以及大多数默认的快捷方式都是相同的。</p>
</li>
<li><p>技术栈和架构：VS Code 和 Eclipse Theia 都基于 Web 技术，包括 TypeScript，HTML5，CSS 以及 Node.js。实际上 Theia 复用了 VS Code 大量的技术，例如结合 Monaco code editor 和 language server protocol (LSP) 的方式，通过 LSP 允许以标准化的方式将代码编辑器的 UI 特性与底层逻辑解耦。</p>
</li>
<li><p>可扩展性和适应性：VS Code 通过用户可安装的 VS Code Extensions 提供了一种扩展机制，提供一套内置的 API 用于扩展 VS Code。Eclipse Theia 提供了一个类似的扩展机制，但称之为 Theia Plugins。Theia 实现了相同的API，所以许多 VS Code 扩展也可以在 Theia中 使用(API并未完全兼容)。简而言之，VS Code Extensions 和 Theia Plugins 在概念上几乎是一样的。通过内置的 API，可以很容易开发一个VS Code 拓展，拓展运行在特定的进程中可以很好的保证产品稳定性，以及允许在运行时安装。这种扩展模式促进了 VS Code 生态，但是缺点是只能基于公开的 API 进行拓展。虽然涵盖了许多用例，例如添加命令，视图或扩展代码编辑，由于无法预见，因此很难进行其他一些修改。Theia 官方说插件克服了 VS Code 拓展的一些限制，提供了更强大的扩展机制。</p>
</li>
<li><p>可用的扩展和技术：Eclipse Theia 支持 VS Code 扩展 API，也可以在 Theia 中使用VS代码扩展，不过有两个限制条件：</p>
<ol>
<li>Theia 还没有覆盖 VS Code 定义的全部 API，存在部分不可用的情况</li>
<li>VS Code 插件市场的使用条款限制插件</li>
</ol>
</li>
<li><p>在线与离线功能/多端：最开始 VS Code 和 Theia 的区别就是在线和离线的区别，Theia 的核心架构明确允许将产品部署为桌面应用程序，并通过浏览器在云中访问。目前 VS Code 和 Theia 都支持在线和离线功能。11月4日，微软公开了 <code>Visual Studio Online</code> 的预览(基于VS Code的基于云的IDE)。</p>
</li>
<li><p>开源：VS Code Project 是开源的，但是 VS Code Product 不是开源的，VS Code Project 基于 MIT 协议；Theia 是基于 Eclipse Public License (EPL) 协议。最大的限制是只允许 VS Code 产品连接 VS Code 拓展市场，其他产品不能直接使用 VS Code 拓展市场的服务。</p>
</li>
<li><p>生态系统和三方库独立性：Theia 复用了 VS Code 生态的大量代码，所以整体代码数量上相对少一些。整体上讲 VS Code 生态更强大，Theia 的优势在于由 Eclipse 基金会托管，众多 Eclipse 成员公司参与 Eclipse Theia 的贡献。</p>
</li>
</ul>
<p>VS Code 实际上也没那么开源。加上近年来微软收购了 github, 相当与掌握了绝大部分开源社区, 又制造了逐渐取代js的新标准 Typescript，还拥有最流行的开发者工具生态势头正旺。Theia就是在这种背景下应运而生-意在打破微软的在IDE寡头统治, 但本身又复用了 VS Code 大量的技术, 颇有种”要用魔法来打败魔法”的味道。</p>
<h3 id="Theia-架构"><a href="#Theia-架构" class="headerlink" title="Theia 架构"></a>Theia 架构</h3><p><img src="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/1589118715419-501d0ed9-e0a3-4358-b429-b04037653171.png" class="lazyload" data-srcset="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/1589118715419-501d0ed9-e0a3-4358-b429-b04037653171.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABlBMVEXMzMyWlpYU2uzLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNgAAAAAgAB9HFkpgAAAABJRU5ErkJggg==" alt="整体架构图"></p>
<h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>Theia 被设计为一个可以在本地运行的桌面应用程序，也可以在浏览器和远程服务器之间工作。</p>
<table>
<thead>
<tr>
<th>支持的架构方式</th>
<th>前端</th>
<th>后端</th>
</tr>
</thead>
<tbody><tr>
<td>Web Client, Remote Back-end (Cloud IDE)</td>
<td>本地 Browser</td>
<td>远端 Node</td>
</tr>
<tr>
<td>Native Front-End, Local Back-end(桌面应用)</td>
<td>Electron</td>
<td>Electron</td>
</tr>
<tr>
<td>Native Front-End, Remote Back-end</td>
<td>Electron</td>
<td>远端 Node</td>
</tr>
</tbody></table>
<p>为了支持这两种工作方式，Theia 运行在两个互相独立的进程-前端和后端，相互之间通过 WebSockets 上的 JSON-RPC(一个无状态且轻量级的远程过程调用传送协议，其传递内容透过JSON 为主) 消息或 HTTP 上的 REST APIs 来通信。对于 Electron 而言，前端和后端都在本地运行，而在远程上下文中，后端运行在远程服务器上。前端和后端进行都有它们各自的依赖注入 (DI) 容器以方便开发者进行扩展。</p>
<p><img src="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/werwer.png" class="lazyload" data-srcset="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/werwer.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABlBMVEXMzMyWlpYU2uzLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNgAAAAAgAB9HFkpgAAAABJRU5ErkJggg==" alt=""></p>
<h4 id="按平台进行区分"><a href="#按平台进行区分" class="headerlink" title="按平台进行区分"></a>按平台进行区分</h4><p>在扩展包的根目录下，包含如下子目录层级，按不同的平台进行区分：</p>
<ul>
<li>common：目录下包含的代码不依赖于任何运行时；</li>
<li>browser：目录下包含的代码需要运行在现代浏览器平台上(DOM API)；</li>
<li>electron-browser：目录下包含了需要 DOM API 及 Electron 渲染进程特定的 APIs 的前端代码；</li>
<li>node：目录包含了需要运行在 Node.js 下的后端代码；</li>
<li>node-electron：目录包含了 Electron 特定的后端代码。</li>
</ul>
<h4 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h4><p>Theia 的布局和 VS Code 很相像, 都是使用了 PhosphorJS来构建模板样式 (Jupyter等开源项目的界面样式也是用了相同框架)</p>
<p>ApplicationShell 类继承自 @phosphor/widgets 的 Widget 类，负责管理应用的顶层 Widget，可以添加、移除、激活 Widget。widget 类也有自己的生命周期。<br>Application shell Widget 由 @phosphor/widgets 的组件组成，主要分为以下几部分：</p>
<ul>
<li>topPanel：类似 VS Code 的标题栏(Title Bar)视图</li>
<li>mainPanel：类似于 VS Code 编辑器(Editor)视图</li>
<li>leftPanel：类似 VS Code 的 活动栏(Activity Bar)视图+ Side Bar(侧边栏)视图</li>
<li>rightPanel：和 leftPanel 同一类型，VS Code 没有这部分的视图</li>
<li>bottomPanel：类似于 VS Code 的面板(Panal)视图</li>
<li>statusBar：类似于 VS Code 的 状态栏(Status Bar)视图</li>
</ul>
<p><img src="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/1589126781587-6cacd6f8-f5b7-40d7-bbe6-957082620be6.png" class="lazyload" data-srcset="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/1589126781587-6cacd6f8-f5b7-40d7-bbe6-957082620be6.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABlBMVEXMzMyWlpYU2uzLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNgAAAAAgAB9HFkpgAAAABJRU5ErkJggg==" alt=""></p>
<h4 id="拓展性"><a href="#拓展性" class="headerlink" title="拓展性"></a>拓展性</h4><h4 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h4><p>Service 是一个提供给其它组件使用的绑定。一个扩展包可以公开 SelectionService，这样其它扩展包就可以获得一个注入的实例并使用它。</p>
<h4 id="Contribution-Points"><a href="#Contribution-Points" class="headerlink" title="Contribution-Points"></a>Contribution-Points</h4><p>Contribution-Points 是沿用了 VS Code 的架构, 贡献能力分为六大类：通用能力、主题、声明性语言功能、程序语言功能、工作区拓展、调试。(<a href="https://code.visualstudio.com/api/extension-capabilities/overview">详细查看</a>)</p>
<p>如果一个扩展包想要提供 hook 由其它扩展包来实现其中的功能，那么它应该定义一个 contribution-point。一个 contribution-point 就是一个可以被其它扩展包实现的接口。扩展包可以在需要时将它委托给其它部分。例如，OpenerService 定义了一个 contribution-point，允许其它扩展包注册 OpenHandler，你可以查看 这里 的代码。Theia 已经提供了大量的 Contribution Points 列表，查看已存在的 Contribution Points 的一个好方法是查找 bindContributionProvider 的引用。</p>
<ul>
<li>configuration 用户设置/工作区设置的配置    </li>
<li>configurationDefaults 默认编辑器配置</li>
<li>commands 命令    </li>
<li>menus 菜单选项</li>
<li>keybindings 快捷键    </li>
<li>languages 编程语言支持</li>
<li>debuggers 调试器    </li>
<li>breakpoints 断点</li>
<li>grammars 语法高亮    </li>
<li>themes 主题</li>
<li>iconThemes 文件图标主题    </li>
<li>productIconThemes 产品图标主题</li>
<li>snippets 代码片段    </li>
<li>jsonValidation JSON 配置文件校验</li>
<li>views 自定义视图    </li>
<li>viewsContainers 自定义视图容器</li>
<li>problemMatchers 问题匹配器模式    </li>
<li>problemPatterns 命名问题模式</li>
<li>taskDefinitions 定义任务    colors 定义颜色名称</li>
<li>typescriptServerPlugins TypeScript 服务器插件</li>
</ul>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul>
<li>首选项，命令面板，菜单，快捷键绑定，文件系统，导航栏，查找，终端，长期运行任务支持, Git支持, 国际化, 打包流程</li>
</ul>
<p>详细架构设计内容可以<a href="https://docs.google.com/document/d/1aodR1LJEF_zu7xBis2MjpHRyv7JKJzW7EWI9XRYCt48/edit#">查看</a>这。</p>
<h3 id="Theia-拓展机制"><a href="#Theia-拓展机制" class="headerlink" title="Theia 拓展机制"></a>Theia 拓展机制</h3><h4 id="Extension"><a href="#Extension" class="headerlink" title="Extension"></a>Extension</h4><p>Theia 由扩展包构成，前端应用程序和主后端应用程序均包含多个扩展。 一个 npm 软件包可以公开一个或多个扩展，这些扩展可以被前端和主后端应用程序使用。一个扩展包就是一个 npm 包，在这个 npm 包中公开了用于创建 DI 容器的多个 DI 模块 (ContainerModule) 。通过在应用程序的 package.json 中添加 npm 包的依赖项来使用扩展包，扩展包能够在运行时安装和卸载，这将触发重新编译和重启。通过 DI 模块，扩展包能提供从类型到具体实现的绑定，即提供服务和功能。</p>
<h5 id="依赖注入（DI）"><a href="#依赖注入（DI）" class="headerlink" title="依赖注入（DI）"></a>依赖注入（DI）</h5><p>控制反转（Inversion of Control，缩写为IoC），是面向对象编程中的一种设计原则，可以用来减低计算机代码之间的耦合度。其中最常见的方式叫做依赖注入（Dependency Injection，简称DI），还有一种方式叫“依赖查找”（Dependency Lookup）。通过控制反转，对象在被创建的时候，由一个调控系统内所有对象的外界实体，将其所依赖的对象的引用传递(注入)给它。</p>
<p>Theia 使用IOC框架 Inversify.js 来连接不同的拓展。Inversify.js 使用装饰器 <code>@injectable</code>，<code>@inject</code> 等常用装饰器表示一个类可以被注入和必须注入哪些其他类, 利用元数据对多个对象进行引用传递，而不是</p>
<p>DI 在创建时注入组件(作为构造函数的参数)，从而将组件从依赖项中彻底解耦出来。DI 容器根据你在启动时通过所谓的容器模块提供的配置项来进行创建。</p>
<p>例如，Navigator 小部件需要访问 FileSystem 用来在树形结构中显示文件夹和文件，但是 FileSystem 接口的实现对 Navigator 来说并不重要，它可以大胆地假设与 FileSystem 接口一致的对象已经准备好并可以使用了。在 Theia 中，FileSystem 的实现仅仅是一个发送 JSON-RPC 消息到后端的代理，它需要一个特殊的配置和处理程序。Navigator不需要关心这些细节，因为它将获取一个被注入的 FileSystem 的实例。此外，这种结构的解耦和使用，允许扩展包在需要时能提供非常具体的功能实现，例如这里提到的 FileSystem，而不需要接触到 FileSystem 接口的任何实现。</p>
<p>根据 <a href="https://theia-ide.org/docs/authoring_extensions/">《Authoring Theia Extensions》</a>的文档创建 Extension 工程。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yo generator-theia-extension //官方的拓展生成工具</span><br><span class="line">mkdir theia-hello-world-extension</span><br><span class="line"><span class="built_in">cd</span> theia-hello-world-extension</span><br><span class="line">yo theia-extension</span><br></pre></td></tr></table></figure>

<p>在 Theia 中一个 Extension 定义了一个或者多个 DI 模块，需要在 Extension 目录下的 package.json 的 theiaExtensions 字段中将路径导出，例如</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"keywords"</span>: [</span><br><span class="line">      <span class="string">"theia-extension"</span> <span class="comment">//Extension 关键词</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"theiaExtensions"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"frontend"</span>: <span class="string">"lib/browser/monaco-browser-module"</span>,</span><br><span class="line">        <span class="attr">"frontendElectron"</span>: <span class="string">"lib/electron-browser/monaco-electron-module"</span></span><br><span class="line">        <span class="comment">// 导出的DI模块路径, Theia 启动时会按照 key值将Extension分配到前/后端</span></span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>据模块最终运行的环境可以分为：frontend、frontendElectron、backend、backendElectron 四类。</p>
<p>theia-hello-world-extension-frontend-module.ts 实现如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; TheiaHelloWorldExtensionCommandContribution, TheiaHelloWorldExtensionMenuContribution &#125; <span class="keyword">from</span> <span class="string">'./theia-hello-world-extension-contribution'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    CommandContribution,</span><br><span class="line">    MenuContribution</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">"@theia/core/lib/common"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ContainerModule &#125; <span class="keyword">from</span> <span class="string">"inversify"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> ContainerModule(<span class="function"><span class="params">bind</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// add your contribution bindings here</span></span><br><span class="line">    bind(CommandContribution).to(TheiaHelloWorldExtensionCommandContribution);</span><br><span class="line">    bind(MenuContribution).to(TheiaHelloWorldExtensionMenuContribution);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在 ContainerModule 中绑定 CommandContribution(命令扩展点)、MenuContribution(菜单扩展点) 类型的扩展点。CommandContribution 接口定义了 registerCommands 方法，MenuContribution 接口定义了 registerMenus 方法。自定义 Extension 具体实现如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; injectable, inject &#125; <span class="keyword">from</span> <span class="string">"inversify"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; CommandContribution, CommandRegistry, MenuContribution, MenuModelRegistry, MessageService &#125; <span class="keyword">from</span> <span class="string">"@theia/core/lib/common"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; CommonMenus &#125; <span class="keyword">from</span> <span class="string">"@theia/core/lib/browser"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TheiaHelloWorldExtensionCommand = &#123;</span><br><span class="line">    id: <span class="string">'TheiaHelloWorldExtension.command'</span>,</span><br><span class="line">    label: <span class="string">"Say Hello"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">@injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> TheiaHelloWorldExtensionCommandContribution <span class="keyword">implements</span> CommandContribution &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="meta">@inject</span>(MessageService) <span class="keyword">private</span> readonly messageService: MessageService,</span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    registerCommands(registry: CommandRegistry): <span class="built_in">void</span> &#123;</span><br><span class="line">        registry.registerCommand(TheiaHelloWorldExtensionCommand, &#123;</span><br><span class="line">            execute: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.messageService.info(<span class="string">'Hello, world!'</span>)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> TheiaHelloWorldExtensionMenuContribution <span class="keyword">implements</span> MenuContribution &#123;</span><br><span class="line"></span><br><span class="line">    registerMenus(menus: MenuModelRegistry): <span class="built_in">void</span> &#123;</span><br><span class="line">        menus.registerMenuAction(CommonMenus.EDIT_FIND, &#123;</span><br><span class="line">            commandId: TheiaHelloWorldExtensionCommand.id,</span><br><span class="line">            label: TheiaHelloWorldExtensionCommand.label</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> browser-app</span><br><span class="line">yarn start &lt;path to workspace&gt;</span><br></pre></td></tr></table></figure>

<p>本地启动后在菜单 Edit-&gt; Say Hello, 点击后就会出现<code>Hello World</code>!</p>
<h4 id="Plug-ins"><a href="#Plug-ins" class="headerlink" title="Plug-ins"></a>Plug-ins</h4><p>Theia 和 VS Code 拓展能力区别较大，Theia 通过 Extension 机制提供对应用内部的拓展能力，通过 Plug-ins 机制提供外部的拓展能力；Theia 的 Plug-ins 机制和 VS Code 的拓展机制类似，同时 Theia Plug-ins 对 VS Code 拓展兼容支持。<br>Plug-ins 相比 Extensions 的优势：</p>
<ul>
<li>代码隔离：Plug-ins 作为插件在单独进程中运行的代码，它不能阻止 Theia 核心进程；</li>
<li>可以在运行时加载：无需重新编译Theia的完整IDE；</li>
<li>减少编译时间：Theia 应用引入的插件无需进行编译；</li>
<li>独立发布：插件可以打包成一个文件，然后直接加载，无需额外获取 npmjs 等的依赖项；</li>
<li>API 方式开发：无需学习 inversify 或其他框架；API 向后兼容，可以轻松进行 Theia 版本升级。</li>
</ul>
<p>另外 Theia 也做了很多便于迁移 VS Code Extension 的工作。比如下图: 可以看到 Theia 可以直接在 package.json 直接远程引用 VS Code 拓展。</p>
<p><img src="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/fdgzlzdfglgf.png" class="lazyload" data-srcset="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/theia/fdgzlzdfglgf.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABlBMVEXMzMyWlpYU2uzLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNgAAAAAgAB9HFkpgAAAABJRU5ErkJggg==" alt=""></p>
<p>Plug-ins 和 Extension 一样官方也提供了了生成工具, 具体的使用方式在此不做详述。 </p>
<h4 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h4><p><a href="https://github.com/eclipse-theia/theia">https://github.com/eclipse-theia/theia</a></p>
<p><a href="https://eclipsesource.com/blogs/2018/06/20/welcome-at-eclipse-theia/">https://eclipsesource.com/blogs/2018/06/20/welcome-at-eclipse-theia/</a></p>
<p><a href="https://www.yuque.com/zhaomenghuan/theia/pbr2hx#HlTcf">https://www.yuque.com/zhaomenghuan/theia/pbr2hx#HlTcf</a></p>
<p><a href="https://docs.google.com/document/d/1aodR1LJEF_zu7xBis2MjpHRyv7JKJzW7EWI9XRYCt48/edit#">https://docs.google.com/document/d/1aodR1LJEF_zu7xBis2MjpHRyv7JKJzW7EWI9XRYCt48/edit#</a></p>
<p><a href="https://eclipsesource.com/blogs/2019/11/21/how-to-create-develop-an-eclipse-theia-ide-extension/">https://eclipsesource.com/blogs/2019/11/21/how-to-create-develop-an-eclipse-theia-ide-extension/</a></p>
</div><ul class="article-post-copyright"><li>本文于 2020-08-20 发布在 <span>代码</span> 分类下，当前已有<span id="busuanzi_container_page_pv">共 &nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span> 人围观</span></li><li><strong>相关标签 : </strong><a class="link-muted mr-2" rel="tag" href="/tags/Theia/">Theia</a><span>‚ </span><a class="link-muted mr-2" rel="tag" href="/tags/VS-Code/">VS Code</a></li><li><strong>本文链接 : </strong><a href="https://chkaos.top/posts/b8644cfb.html">https://chkaos.top/posts/b8644cfb.html</a></li><li><strong>版权声明 : </strong><span>自由转载-署名-非商业性使用 | <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a></span></li></ul><!--!--></article></div><div class="card donate"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/me/wechat.jpg" class="lazyload" data-srcset="https://chkaos.oss-cn-hangzhou.aliyuncs.com/image/me/wechat.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABlBMVEXMzMyWlpYU2uzLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNgAAAAAgAB9HFkpgAAAABJRU5ErkJggg==" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 is-mobile"><div class="article-nav-prev"><a class="link-muted" href="/posts/c84bd824.html"><i class="fas fa-chevron-left"></i><span class="article-nav-title">Hexo 建站小记</span></a></div><div class="article-nav-next"><a class="link-muted" href="/posts/6cd4881c.html"><span class="article-nav-title">MIT Challenge</span><i class="fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: '3c6adb8f65e9b9365b5500ab34896c4d',
            repo: 'blog-comment',
            owner: 'chkaos',
            clientID: 'a6f32bbb1abb8ffc964e',
            clientSecret: '530244c02ace009860b74607dfcb1eb49e57134d',
            admin: ["chkaos"],
            createIssueManually: true,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: 'last',
            proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
            
            enableHotKey: true
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card left-navbar"><div class="card-content"><div class="left-navbar-menu"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a><a class="navbar-item" target="_blank" rel="noopener" title="RSS" href="http://chkaos.top/atom.xml">RSS</a><a class="navbar-item" target="_blank" rel="noopener" title="MIT挑战" href="http://chkaos.top/note/mit/">MIT挑战</a></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex is-mobile" href="#Theia-扫盲篇"><span>Theia 扫盲篇</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#What-is-Eclipse-Theia"><span>What is Eclipse Theia?</span></a></li><li><a class="is-flex is-mobile" href="#Theia和VSCode"><span>Theia和VSCode</span></a></li><li><a class="is-flex is-mobile" href="#Theia-架构"><span>Theia 架构</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#概述"><span>概述</span></a></li><li><a class="is-flex is-mobile" href="#按平台进行区分"><span>按平台进行区分</span></a></li><li><a class="is-flex is-mobile" href="#layout"><span>layout</span></a></li><li><a class="is-flex is-mobile" href="#拓展性"><span>拓展性</span></a></li><li><a class="is-flex is-mobile" href="#Services"><span>Services</span></a></li><li><a class="is-flex is-mobile" href="#Contribution-Points"><span>Contribution-Points</span></a></li><li><a class="is-flex is-mobile" href="#其他"><span>其他</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#Theia-拓展机制"><span>Theia 拓展机制</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#依赖注入（DI）"><span>依赖注入（DI）</span></a></li><li><a class="is-flex is-mobile" href="#Plug-ins"><span>Plug-ins</span></a></li><li><a class="is-flex is-mobile" href="#参考链接："><span>参考链接：</span></a></li></ul></li></ul></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/%E4%BB%A3%E7%A0%81/"><span class="level-start"><span class="level-item categoty-title">代码</span></span><span class="level-end"><span class="level-item tag">34</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item categoty-title">工具</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%80%9D%E8%80%83/"><span class="level-start"><span class="level-item categoty-title">思考</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%B8%B8%E6%88%8F/"><span class="level-start"><span class="level-item categoty-title">游戏</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%81%8C%E4%B8%9A/"><span class="level-start"><span class="level-item categoty-title">职业</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p><time dateTime="2021-08-15T07:35:41.000Z">2021-08-15</time></p><p class="title is-6"><a class="link-muted media-title" href="/posts/df33f624.html">创建型/结构型/行为型设计模式及 4 种最佳实践</a></p></div></article><article class="media"><div class="media-content"><p><time dateTime="2021-07-26T16:15:39.000Z">2021-07-27</time></p><p class="title is-6"><a class="link-muted media-title" href="/posts/92b02c59.html">Deno 简介</a></p></div></article><article class="media"><div class="media-content"><p><time dateTime="2021-06-27T14:31:00.000Z">2021-06-27</time></p><p class="title is-6"><a class="link-muted media-title" href="/posts/c6a7ef4.html">KK 给年轻人的一些人生建议</a></p></div></article><article class="media"><div class="media-content"><p><time dateTime="2021-06-23T04:10:00.000Z">2021-06-23</time></p><p class="title is-6"><a class="link-muted media-title" href="/posts/5e24e4b2.html">So long, gay 骆驼</a></p></div></article><article class="media"><div class="media-content"><p><time dateTime="2021-06-16T11:10:00.000Z">2021-06-16</time></p><p class="title is-6"><a class="link-muted media-title" href="/posts/b1ca8d55.html">谷歌学术使用指南</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/08/"><span class="level-start"><span class="level-item archive-title">八月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/07/"><span class="level-start"><span class="level-item archive-title">七月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/06/"><span class="level-start"><span class="level-item archive-title">六月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/05/"><span class="level-start"><span class="level-item archive-title">五月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/04/"><span class="level-start"><span class="level-item archive-title">四月 2021</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部 &gt;</span></span></a></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline tag-container"><div class="control"><a class="tags has-addons" href="/tags/CSS/"><span class="tag tag-name">CSS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Class/"><span class="tag tag-name">Class</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Deno/"><span class="tag tag-name">Deno</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Google-Chrome-V8/"><span class="tag tag-name">Google Chrome V8</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Google-Scholar/"><span class="tag tag-name">Google Scholar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag tag-name">Hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/How-JavaScript-works/"><span class="tag tag-name">How JavaScript works</span><span class="tag">28</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Javascript/"><span class="tag tag-name">Javascript</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MIT%E6%8C%91%E6%88%98/"><span class="tag tag-name">MIT挑战</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MutationObserver/"><span class="tag tag-name">MutationObserver</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag tag-name">React</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React-Diff/"><span class="tag tag-name">React Diff</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Service-Workers/"><span class="tag tag-name">Service Workers</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shadow-DOM/"><span class="tag tag-name">Shadow DOM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Theia/"><span class="tag tag-name">Theia</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VS-Code/"><span class="tag tag-name">VS Code</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web-Workers/"><span class="tag tag-name">Web Workers</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WebAssembly/"><span class="tag tag-name">WebAssembly</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WebRTC/"><span class="tag tag-name">WebRTC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%87%AF%E6%96%87%C2%B7%E5%87%AF%E5%88%A9/"><span class="tag tag-name">凯文·凯利</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/"><span class="tag tag-name">函数式编程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A8%E7%94%BB/"><span class="tag tag-name">动画</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/"><span class="tag tag-name">同源策略</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"><span class="tag tag-name">密码学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%AB%E5%B8%88%E4%B8%89/"><span class="tag tag-name">巫师三</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BB%BA%E7%AB%99%E5%B0%8F%E8%AE%B0/"><span class="tag tag-name">建站小记</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"><span class="tag tag-name">异常处理</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8E%92%E5%BA%8F/"><span class="tag tag-name">排序</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"><span class="tag tag-name">浏览器</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/"><span class="tag tag-name">浏览器缓存</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/"><span class="tag tag-name">渲染引擎</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B8%B8%E6%88%8F/"><span class="tag tag-name">游戏</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag tag-name">算法</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"><span class="tag tag-name">编译原理</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C/"><span class="tag tag-name">网络</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E9%A1%B5%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81/"><span class="tag tag-name">网页消息推送</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%81%8C%E4%B8%9A%E5%8F%91%E5%B1%95/"><span class="tag tag-name">职业发展</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B4%A0/"><span class="tag tag-name">自定义元素</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"><span class="tag tag-name">计算机科学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="tag tag-name">设计模式</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB/"><span class="tag tag-name">跨站脚本攻击</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E8%AF%95/"><span class="tag tag-name">面试</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><meting-js server="netease" type="playlist" id="2683835425" theme="#3273dc" loop="all" fixed="true" mini="true" autoplay="true" order="list" storageName="aplayer-setting" list-folded="true" lrctype="0" list-max-height="300px"></meting-js><footer class="footer"><div class="container"><div class="level"><p class="size-small"><span>&copy; 2021 Chkaos Find the calm in chaos</span><span> | </span><span>Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></span></p><p class="size-small"><span id="statistic-times">loading...</span><script>function createTime(time) {
      var n = new Date(time);
      now.setTime(now.getTime() + 250),
          days = (now - n) / 1e3 / 60 / 60 / 24,
          dnum = Math.floor(days),
          hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
          hnum = Math.floor(hours),
      1 == String(hnum).length && (hnum = "0" + hnum),
          minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
          mnum = Math.floor(minutes),
      1 == String(mnum).length && (mnum = "0" + mnum),
          seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
          snum = Math.round(seconds),
      1 == String(snum).length && (snum = "0" + snum),
          document.getElementById("statistic-times").innerHTML = "本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒";
  }var now = new Date();setInterval("createTime('2020/07/11 00:00:00')", 250,"");</script><br></p><p class="size-small"><span id="busuanzi_container_site_uv">共 <span id="busuanzi_value_site_uv">0</span> 人围观</span></p><p class="size-small"><a href="http://chkaos.gitee.io/">备用网址</a></p></div></div></footer><script src="/js/lazyload.js"></script><script src="/js/utils.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://chkaos.top',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
            $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
        
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            lazyLoadImg();
        });</script><script src="/js/toc.js" defer></script><script type="text/javascript" src="/js/theme.js"></script><script type="text/javascript" src="/js/egg.js"></script><script src="/js/main.js" defer></script><script src="/js/music.js"></script><script src="/js/copyright.js"></script><script src="/js/instant.page.js" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>